### back propagation 

### 오차 역전파(back propagation)
: 가중치 매개변수의 기울기를 효율적으로 계산
가중치에서 기울기를 빼도 값의 변화가 없을 때까지 계속해서 가중치 수정 작업을 반복하는 것 

오차 역전파 구동 방식 
1. 임의의 초기 가중치(W)를 준 뒤 결과(Y)를 계산한다 
2. 계산 결과와 우리가 원하는 값 사이의 오차를 구한다 
3. 경사 하강법을 이용해 바로 앞 가중치를 오차가 작아지는 방향으로 업데이트
4. 위 과정을 더이상 오차가 줄어들지 않을 때까지 반복
- 오차가 작아지는 방향으로 업데이트한다는 의미는 미분 값이 0에 가까워지는 방향으로 나아간다는 의미 
- 그래서 오차역전파를 다른 방식으로 표현하면 가중치에서 기울기를 빼도 값이 변화가 없을 떄까지 계속해서 가중치 수정 작업을 반복하는 것 

![backPropagation](../../img/DL/backPropagation.png) <br>

신경망의 구현 과정
![backPropagationProcess](../../img/DL/backPropagationProcess.png) <br>

다층 퍼셉트론이 오차 역전파를 만나 신경망이 되고, 신경망은 xor 문제를 가볍게 해결하지만, 문제점이 생긴다 
기울기 소실 (vanishing gradient) 
: 층이 늘어나면서 역전파를 통해 전달되는 이 기울기의 값이 점점 작아져 맨 처음층까지 전달되지 않는 문제
이는 활성화 함수로 사용된 시그모이드 함수의 특성 때문이다 

### 계산 그래프 (computational graph)
: 계산과정을 그래프로 표현하며, 우리가 잘아는 그래프 자료구조로 복수의 노드(node)와 에지(edge)로 표현

ex) 슈퍼에서 사과를 2개 귤을 3개 샀습니다. 사과 1개에 100원 귤을 150원 이고, 소비세가 10% 일때 지불 금액을 구하시오
![computationalGraph](../../img/DL/computationalGraph.png) <br>

Tip) 계산을 왼쪽에서 오른족으로 진행하는 단계를 순전파 (forward propagation)라고 마혀, 순전파는 계산 그래프의 출발점부터 종착점으로의 전파이다
그것의 반대로 반향으로 진행하는 전파를 역전파(backward propagation)라고 하며, 미분을 계산할 때 중요한 역할을 한다 

- 국소적 계산
계산 그래프의 특징은 국소적 계산을 전파함으로써 최종 결과를 얻는다는 점에 있다. 국소적이란 자신과 직접 관계된 작은 범위라는 뜻이고, 국소적 계산은 결국 전체에서 어떤 일이 벌어지는 상관없이 자신과 관계된 정보만으로 결과를 출력할 수 있다는 점이다. 즉, 복잡한 계산도 분해하면 단순한 계산으로 구성한다는 점이다.

왜? 계산 그래프인가?
: 계산 그래프를 통해서 순전파와 역전파를 활용해서 각 변수의 미분을 효율적으로 구할수 있다는 장점이 있다 

### 연쇄법칙
: 연전파는 국소적인 미분을 순방향과는 반대인 오른쪽에서 왼쪽으로 전달한다. 이 국소적 미분을 전달하는 원리를 연쇄법칙(chain rule)에 따른 것이다 

![computationalGraphBP](../../img/DL/computationalGraphBP.png) <br>
- 다음과 같이 역전파의 계산 절파는 신호 E에 노드의 국소적 미분을 곱한후 다음노드로 전달하는 것이다. 여기서 말하는 국소적 미분은 순전파 때의 y=f(x) 계산의 미분을 구하는것이며, 이는 x에 대한 y의 미분을 구한다는 뜻이다. 이것이 역전파의 계산 순서인데, 이러한 방식을 따르면 목표로 하는 미분 값을 효율적으로 구할 수 있다는 것이 이 전파의 핵심이다.

- 연쇄법칙은 합성함수의 미분에 대한 성질이며, 합성함수의 미분은 함성함수를 구성하는 각 함수의 미분의 곱으로 나타낼수 있다. 

![chainRule](../../img/DL/chainRule.png) <br>
- 다음과 같이 z와 t에 대해서, x에 대한 편미분을 통한 값을 합성함수를 이용할 수 있다는 것을 보여주고 있다.

연쇄법칙을 계산 그래프로 나타내면 
![chainRuleGraph](../../img/DL/chainRuleGraph.png) <br>
: 순전파와는 반대 방향으로 국소적 미분을 곱하여 전달한다 

![chainRuleGraph1](../../img/DL/chainRuleGraph1.png) <br>
: 계산 그래프의 연전파 결과에 따르면 z를 x에 대한 편미분 값은 2(x+y)가 된다 
